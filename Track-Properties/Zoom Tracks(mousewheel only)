--Mousewhell only!--
--get mousewhell value--
reaper.PreventUIRefresh(111)
function main()
    is_new_val,f_name,secID,cmdID,mode,reso,val = reaper.get_action_context()
    if     val>0  then K=1.2
    elseif val<0  then K=0.8
    end
    --for each track--
    if val~=0 then
        for i=1,reaper.CountTracks(0) do
          tr = reaper.GetTrack(0,i-1)
          tr_h = reaper.GetMediaTrackInfo_Value(tr, 'I_WNDH')
          ret, chunk = reaper.GetTrackStateChunk(tr, '', false)
          Env_Count = reaper.CountTrackEnvelopes(tr)
          new_h = (tr_h/(Env_Count+1))
          new_h = math.floor(new_h*K+0.5)
          
          chunk = chunk:gsub("TRACKHEIGHT %d+","TRACKHEIGHT "..new_h)
          chunk = chunk:gsub("LANEHEIGHT %d+","LANEHEIGHT "..new_h)
          reaper.SetTrackStateChunk(tr, chunk, false)
        end
    
    end
end 
reaper.TrackList_AdjustWindows(0)
reaper.UpdateArrange()
reaper.PreventUIRefresh(-111)
   
reaper.defer(main)
